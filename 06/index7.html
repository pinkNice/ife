<!DOCTYPE html>
<html>
<head>
	<title>淡出</title>
</head>
<body>
<div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
<button id="fade-btn">淡出</button>
</body>
<script>
	var btnEle = document.querySelector('#fade-btn'),
			objEle = document.querySelector('#fade-obj'),
			num = 10;
	var flag = true,
			insetIn,
			outsetIn;
	btnEle.onclick = function(){
			if(num > 0){
				fadeOut();
			}else{
				fadeIn()
			}
	};

	var fadeOut = function(){
		outsetIn = setInterval(function(){
			btnEle.disabled = true;
			btnEle.innerHTML = '淡入';
			num--;
			objEle.style.opacity = num / 10;

			if(num > 0){
				btnEle.innerHTML = '淡出';
			}else{
				console.log(num)
				btnEle.disabled = false;
				clearInterval(outsetIn);		
			}
		},300);
	};

	var fadeIn = function(){
		insetIn = setInterval(function(){
			btnEle.disabled = true;
			if(num <= 10){
				num++;
				objEle.style.opacity = num / 10;
			}else{
				btnEle.disabled = false;
				clearInterval(insetIn);
				btnEle.innerHTML = '淡出';
			}
		},300);
	};

	
</script>
</html>